<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>하이오더 위약금 계산기 (가입유형 + 기계값 납부 방식)</title>
<style>
  :root{ --bg:#0b1220; --card:#111827; --muted:#94a3b8; --text:#e5e7eb; --accent:#60a5fa; --bd:#293243; }
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Pretendard,sans-serif}
  .container{max-width:1100px;margin:0 auto;padding:20px}
  h1{font-size:clamp(22px,2.6vw,32px);margin:8px 0 16px}
  .grid{display:grid;grid-template-columns: repeat(12,1fr); gap:14px}
  .card{grid-column:span 12;background:var(--card);border:1px solid var(--bd);border-radius:14px;padding:16px}
  @media (min-width:1000px){.left{grid-column:span 5}.right{grid-column:span 7}}
  label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
  select,input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--bd);background:#0f172a;color:var(--text)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
  .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
  .kpi .box{background:#0f172a;border:1px solid var(--bd);border-radius:12px;padding:12px}
  .kpi .num{font-weight:700;font-size:18px}
  table{width:100%;border-collapse:collapse;margin-top:12px;font-size:14px}
  thead th{background:#0f172a;border-bottom:1px solid var(--bd);padding:8px;color:var(--muted)}
  tbody td{border-bottom:1px dashed #1f2937;padding:6px 8px;text-align:right}
  tbody td:first-child{text-align:center}
  button{padding:10px 12px;border-radius:10px;border:1px solid var(--bd);background:#0f172a;color:var(--text);cursor:pointer}
  button.primary{background:var(--accent);color:#0b1220;border-color:transparent;font-weight:700}
  .muted{color:var(--muted);font-size:12px;margin-top:6px}
</style>
</head>
<body>
  <div class="container">
    <h1>하이오더 위약금 계산기</h1>
    <p class="lead">가입유형 및 기계값 납부 방식에 따라 산식이 달라집니다.<br>
    • 신규가입: (미납금+초기설치비+프로모션할인금액) + (서비스이용료 × 잔여개월 × 50%) + 잔여기계값 납부<br>
    • 재약정가입: (할인반환금) + (서비스이용료 × 잔여개월 × 50%)<br>
    <span class="muted">36개월 약정, 1~36개월 결과 고정 표출</span></p>

    <div class="grid">
      <section class="card left">
        <div class="row">
          <div>
            <label>가입유형</label>
            <select id="joinType">
              <option value="new">신규가입</option>
              <option value="re">재약정가입</option>
            </select>
          </div>
          <div>
            <label>프로모션 할인금액</label>
            <input id="promo" type="number" min="0" value="0">
          </div>
        </div>

        <div class="row">
          <div>
            <label>기계값 납부 방식</label>
            <select id="devicePay">
              <option value="lump">일시납</option>
              <option value="install">할부지속</option>
            </select>
          </div>
          <div>
            <label>잔여 기계값 (총액)</label>
            <input id="deviceRemain" type="number" min="0" value="0">
          </div>
        </div>

        <div class="row">
          <div>
            <label>하이오더 선택</label>
            <select id="prodHO"></select>
          </div>
          <div>
            <label>대수</label>
            <input id="qtyHO" type="number" min="0" max="99" value="0">
          </div>
        </div>

        <div class="row">
          <div>
            <label>알림판 선택</label>
            <select id="prodAL"></select>
          </div>
          <div>
            <label>대수</label>
            <input id="qtyAL" type="number" min="0" max="99" value="0">
          </div>
        </div>

        <div class="row">
          <div>
            <label>약정 개월</label>
            <input id="contract" type="number" min="1" max="60" value="36">
          </div>
          <div>
            <label>표시구간</label>
            <input id="range" type="number" min="36" max="36" value="36" readonly>
          </div>
        </div>

        <div class="kpi">
          <div class="box"><div class="label">월 할인액(합산)</div><div class="num" id="kpi-discount">-</div></div>
          <div class="box"><div class="label">월 서비스료(합산)</div><div class="num" id="kpi-service">-</div></div>
          <div class="box"><div class="label">1개월차 위약금(합계)</div><div class="num" id="kpi-first">-</div></div>
        </div>
        <button class="primary" id="recalc">계산하기</button>
      </section>

      <section class="card right">
        <table>
          <thead>
            <tr><th>사용</th><th>잔여</th><th>할인반환금</th><th>서비스 위약</th><th>프로모션</th><th>기계값</th><th>총 위약금</th></tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </section>
    </div>
  </div>

<script>
  const DATA = {
    HO: [
      {name:"하이오더1 (메뉴판)", noContract:108000, contract36:3000, service:15000},
      {name:"하이오더2 (메뉴판)", noContract:170000, contract36:5000, service:15000},
      {name:"선불형 카드리더기", noContract:67000, contract36:2000, service:15000}
    ],
    AL: [
      {name:"알림판 10인치 (하이오더1)", noContract:108000, contract36:3000, service:15000},
      {name:"알림판 10인치 (하이오더2)", noContract:170000, contract36:5000, service:15000},
      {name:"알림판 15인치", noContract:237000, contract36:7000, service:15000}
    ]
  }

  const $ = id=>document.getElementById(id)
  const fmt = n=>Math.round(n).toLocaleString('ko-KR')

  function init(){
    $("prodHO").innerHTML = DATA.HO.map(p=>`<option>${p.name}</option>`).join('')
    $("prodAL").innerHTML = DATA.AL.map(p=>`<option>${p.name}</option>`).join('')
    $("recalc").addEventListener('click', recalc)
    recalc()
  }

  function getSelected(){
    const ho = DATA.HO[$("prodHO").selectedIndex]
    const al = DATA.AL[$("prodAL").selectedIndex]
    const qHO = Math.max(0, Number($("qtyHO").value)||0)
    const qAL = Math.max(0, Number($("qtyAL").value)||0)
    const promo = Math.max(0, Number($("promo").value)||0)
    const joinType = $("joinType").value
    const devicePay = $("devicePay").value
    const deviceRemain = Math.max(0, Number($("deviceRemain").value)||0)
    return {ho, al, qHO, qAL, promo, joinType, devicePay, deviceRemain}
  }

  function recalc(){
    const {ho, al, qHO, qAL, promo, joinType, devicePay, deviceRemain} = getSelected()
    const contract = Number($("contract").value)||36
    const months = 36

    const mdHO = (ho.noContract - ho.contract36) * qHO
    const mdAL = (al.noContract - al.contract36) * qAL
    const monthlyDiscount = mdHO + mdAL
    const serviceSum = (ho.service * qHO) + (al.service * qAL)

    $("kpi-discount").textContent = fmt(monthlyDiscount) + ' 원'
    $("kpi-service").textContent = fmt(serviceSum) + ' 원'

    const rows=[]
    for(let used=1; used<=months; used++){
      const remain = Math.max(contract - used, 0)
      let refund = 0
      let servicePenalty = serviceSum * remain * 0.5
      let promoPenalty = promo
      let devicePenalty = 0

      if(joinType==="re"){
        refund = ((ho.noContract - ho.contract36) * qHO + (al.noContract - al.contract36) * qAL) * used
      } else {
        refund = 0
      }

      if(devicePay==="lump"){
        devicePenalty = deviceRemain
      } else {
        // 할부지속: 월별 기계값 상환액을 표시 (총액/약정개월)
        devicePenalty = deviceRemain/contract * remain
      }

      const total = refund + servicePenalty + promoPenalty + devicePenalty
      if(used===1) $("kpi-first").textContent = fmt(total) + ' 원'
      rows.push(`<tr><td>${used}개월</td><td>${remain}</td><td>${fmt(refund)}</td><td>${fmt(servicePenalty)}</td><td>${fmt(promoPenalty)}</td><td>${fmt(devicePenalty)}</td><td>${fmt(total)}</td></tr>`)
    }
    $("tbody").innerHTML = rows.join('')
  }

  init()
</script>
</body>
</html>
